# ============================================
# SymmetricDS Node Configuration - AMÉRICA
# ============================================
# 
# INSTRUCCIONES PARA EL ESTUDIANTE:
# Este archivo debe ser configurado para conectar el nodo América
# con la base de datos PostgreSQL y establecer la replicación bidireccional
# con el nodo Europa.
#
# TAREAS:
# 1. Configurar la conexión a PostgreSQL (db.*)
# 2. Definir el group.id y external.id del nodo
# 3. Configurar el modo de registro (registration.url)
# 4. Habilitar servicios necesarios
#
# ============================================

# --------------------------------------------
# Identificación del Nodo
# --------------------------------------------
# Nodo América - Nodo Raíz de la replicación
engine.name=america
group.id=america-store
external.id=001

# --------------------------------------------
# Conexión a la Base de Datos PostgreSQL
# --------------------------------------------
# Configuración de conexión a PostgreSQL
db.driver=org.postgresql.Driver
db.url=jdbc:postgresql://postgres-america:5432/globalshop
db.user=symmetricds
db.password=symmetricds

# --------------------------------------------
# Modo de Registro
# --------------------------------------------
# Este nodo es el nodo RAÍZ - NO necesita registration.url
# registration.url debe estar vacío

registration.url=

# --------------------------------------------
# Configuración de Sincronización
# --------------------------------------------
# URL de sincronización de este nodo
sync.url=http://symmetricds-america:31415/sync/america

# Intervalo de push/pull (en milisegundos)
# Controla con qué frecuencia se envían/reciben cambios
job.push.period.time.ms=5000
job.pull.period.time.ms=5000
job.routing.period.time.ms=5000

# --------------------------------------------
# Servicios y Características
# --------------------------------------------
# Habilitar servicios de sincronización
start.push.job=true
start.pull.job=true
start.route.job=true
start.heartbeat.job=true

# Auto registro y creación de triggers
auto.register=true
auto.reload=true
auto.upgrade=true

# --------------------------------------------
# Configuración HTTP/REST API
# --------------------------------------------
# Puerto para el servicio HTTP de SymmetricDS
http.enable=true
http.port=31415

# Tiempo de espera
http.timeout.ms=90000

# --------------------------------------------
# Logging y Debugging
# --------------------------------------------
# Nivel de log (ERROR, WARN, INFO, DEBUG)
console.log.level=INFO

# Log de datos sincronizados (útil para debugging)
log.conflict.resolution=true

# --------------------------------------------
# Configuración de Transformación de Datos
# --------------------------------------------
# SymmetricDS manejará diferencias entre PostgreSQL y MySQL
# automáticamente, pero podemos especificar comportamientos

# Manejo de conflictos (last_write_wins, manual, ignore)
conflict.resolver=last_write_wins

# --------------------------------------------
# Parámetros de Red
# --------------------------------------------
# Tamaño de lote para sincronización
transport.max.bytes.to.sync=1048576

# Timeout de conexión
transport.timeout.ms=300000

# ============================================
# NOTAS IMPORTANTES:
# 
# 1. Este nodo (América) debe ser configurado primero
# 2. El nodo Europa se registrará contra este nodo
# 3. No olvides completar TODOS los campos marcados con COMPLETAR
# 4. Los valores deben coincidir con tu docker-compose.yml
# 
# ============================================
